{% extends "base_template.html" %}

{% block content %}
<form method="GET" action="{% url 'select_chars' %}">
    {% csrf_token %}
    <div class="top_bar" style="background-color: cyan; height: 50px;">
        <input type="submit" value="Далее">
    </div>
    <div style="display: flex; flex-direction: column; width: 100%;">
        {% for app_list in apps %}
            <div style="display: flex; flex-direction:row; align-items: flex-start; width: 100%;">
                {% for app in app_list %}
                    <div style="width: 20%; height: calc((100vh - 140px) / 2); background-color: gray;">
                        <div style="width: 100%; height: 100%; background: transparent;">
                            <div class="centered" style="width: 100%; height: 40%; padding-top: 20px;">
                                <img src="{{ app.icon.url }}" style="max-width: 80%; max-height: 100%; padding: 10px;">
                            </div>
                            <div style="width: 100%; height: 52px; display: flex; flex-direction: column; justify-content: space-around; align-items: center; margin-top: 10px;">
                                <div class="centered" style="width: 100%; height: 60%;font-size: 22px; padding-bottom: 10px; text-align: center;">
                                    {{ app.name }}
                                </div>
                                <div class="centered" style="width: 80%; height: 40%;font-size: 15px; border-top: 1px solid black; padding-top: 16px; text-align: center;">
                                    {{ app.category }}
                                </div>
                            </div>
                            <div class="centered" style="width: 100%; height: calc(60% - 110px);">

                            </div>
                            <div style="width: 100%; height: 58px; display: flex; align-items: center; justify-content: flex-end; position: relative; bottom: 16px; right: 10px;">
                                <input type="checkbox" class="app_checkbox" name="id" value="{{ app.id }}">
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
</form>
<script>
    var checkboxes = document.querySelectorAll('.app_checkbox');
    for (let i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked === true) {
            checkboxes[i].parentElement.parentElement.style.background = 'linear-gradient(45deg, rgba(174,255,0,0.5) 0%, rgba(178,232,40,0.5) 35%, rgba(3,255,0,0.5) 100%)';
        }
    };
    for (let i = 0; i < checkboxes.length; i++) {
        checkboxes[i].addEventListener("change", event => {
            x = checkboxes[i].parentElement.parentElement;
            if (checkboxes[i].checked === true) {
                x.style.background = 'linear-gradient(45deg, rgba(174,255,0,0.5) 0%, rgba(178,232,40,0.5) 35%, rgba(3,255,0,0.5) 100%)';
            } else {
                x.style.background = 'transparent';
            }
        });
    }
</script>
{% endblock %}
