{% extends "base_component.html" %}

{% block filters %}
    <form method="GET" action="{% url 'select_videocard' %}">
        {% csrf_token %}
        <input type="hidden" name="prev_params" value="{{ params }}">
        <div class="comp_filter">
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    Сортировка
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="z-index: 1;">
                    <input type="radio" id="sort_default" name="sort" value="default" checked="true">
                    <label for="sort_default">По умолчанию</label><br>
                    <input type="radio" id="sort_price_asc" name="sort" value="price_asc">
                    <label for="sort_price_asc">По цене ↑</label><br>
                    <input type="radio" id="sort_price_desc" name="sort" value="price_desc">
                    <label for="sort_price_desc">По цене ↓</label><br>
                    <input type="radio" id="sort_performance_asc" name="sort" value="performance_asc">
                    <label for="sort_performance_asc">По производительности ↑</label><br>
                    <input type="radio" id="sort_performance_desc" name="sort" value="performance_desc">
                    <label for="sort_performance_desc">По производительности ↓</label><br>
                </ul>
            </div>
        </div>
        <div class="comp_filter">
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    Чип
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="z-index: 1;">
                    {% for chip in chips %}
                        <input type="checkbox" id="{{chip}}" name="chip" value="{{chip}}">
                        <label for="{{chip}}">{{chip}}</label><br>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <input type="submit" value="Применить">
        <a href="{% url 'select_videocard' %}">Сбросить фильтры</a>
        
    </form>
{% endblock %}

{% block components %}
    {% for videocard in page.object_list %}
        <div class="comp_body">
            <div class="comp_title">
                <div style="padding-top: 5px; padding-bottom: 5px; font-size: 16pt; font-weight: semi-bold;"> {{ videocard.manufacturer.name }} {{ videocard.model }} </div>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div class="comp_img centered">
                    <img src="{{ videocard.image.url }}" style="max-height: 220px; max-width: 220px; height: auto; width: auto; padding: 10px;">
                </div>
                <div class="comp_chars">
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Графический процессор: {{ videocard.chip_manufacturer.name }} {{ videocard.chip }}</div>
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Версия PCI-E: {{ videocard.pciex16_ver }}</div>
                    {% if videocard.coolers %}
                        <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Кол-во вентиляторов: {{ videocard.coolers }}</div>
                    {% endif %}
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Частота граф.процессора: {{ videocard.frequency }} МГц</div>
                    {% if videocard.boost_freq %}
                        <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Частота граф.процессора (Boost): {{ videocard.boost_freq }} МГц</div>
                    {% endif %}
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Объём видеопамяти: {{ videocard.mem_volume }} Гб</div>
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Тип видеопамяти: {{ videocard.mem_type }}</div>
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Ширина шины: {{ videocard.bus_width }} бит</div>
                    {% if videocard.bandwidth %}
                        <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Пропускная способность: {{ videocard.bandwidth }} ГБ/c</div>
                    {% endif %}
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Кол-во поддерживаемых мониторов: {{ videocard.max_monitors }}</div>
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Рекомендуемая мощность БП: {{ videocard.psu_power }} Вт</div>
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Количество занимаемых слотов: {{ videocard.exp_slots }}</div>
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Длина: {{ videocard.length }} мм</div>
                    {% if videocard.rating %}
                        <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Рейтинг производительности: {{ videocard.rating }}</div>
                    {% endif %}
                    {% load custom_filters %}
                    <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Разъёмы:</div>
                    {% for key in videocard.backports|get_json_keys %}
                        <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'> — {{ key }}: {{ videocard.backports|get_json_value:key }}</div>
                    {% endfor %}
                    {% if videocard.power_pins %}
                        <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'>Разъём питания:</div>
                        {% for key in videocard.power_pins|get_json_keys %}
                            <div style='padding-top: 5px; padding-left: 5px; font-size: 12pt;'> — {{ key }}: {{ videocard.power_pins|get_json_value:key }}</div>
                        {% endfor %}
                    {% endif %}
                </div>
                <div class="comp_add">
                    <div class="comp_price">
                        {{ videocard.price }} ₽
                    </div>
                    <div class="comp_add_button_space">
                        <form method="POST" action="{% url 'add_videocard' %}">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ videocard.id }}">
                            <input type="submit" value="Добавить">
                        </form>
                    </div>
                </div>
            </div>
        </div>     
    {% endfor %}
{% endblock %}
